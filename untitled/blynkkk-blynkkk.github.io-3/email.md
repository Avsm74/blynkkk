# email

## Электронная почта \(Email\)

Виджет электронной почты позволяет отправлять электронные письма с вашего оборудования на любой адрес.

Пример кода:

```cpp
Blynk.email("my_email@example.com", "Тема", "Текст вашего сообщения");
```

Код содержит первое поле `to`. С помощью этого поля вы можете определить получателей электронной почты в приложении. Вы можете пропустить поле `to`, если хотите отправить электронное письмо на адрес электронной почты используемый для входа в приложение Blynk:

```cpp
 Blynk.email("Тема", "Текст вашего сообщения");
```

Вы можете отправить электронное писбом в форматах либо `text/html`, либо `text/plain` \(помните что некоторые клиенты не поддерживают `text/html`\). Вы можете изменить формат содержимого электронного письма в настройках виджета.

Дополнительно в письме вы можете использовать заполнители/переменные `{DEVICE_NAME}`, `{DEVICE_OWNER_EMAIL}` и `{VENDOR_EMAIL}` \(для локального сервера\) в полях `to` \(кому\),`subject` \(тема\) и `body` \(текст сообщения\):

```cpp
Blynk.email("{DEVICE_OWNER_EMAIL}", "{DEVICE_NAME} : Тревога", "Ваше устройство {DEVICE_NAME} имеет критическую ошибку!");
```

**Недостатки:**

* Максимально допустимые ограничения \(почта + тема + длина сообщения\) = 120 символов. Однако вы можете увеличить этот лимит при необходимости добавив `#define BLYNK_MAX_SENDBYTES XXX` к вашему коду. Где `XXX` - это максимальная длина вашего письма в символах.

  Например, для ESP вы можете установить максимальную длину 1200 символов `#define BLYNK_MAX_SENDBYTES 1200`. Параметр  `#define BLYNK_MAX_SENDBYTES 1200` должен быть опредлен в коде до включения Blynk.

* Разрешено отправлять 1 электронное письмо в течение 5 секунд;
* Если вы используете Gmail сервис \(Google\), вы ограничены 500 письмами в день. Другие провайдеры могут иметь аналогичные ограничения, поэтому, пожалуйста, будьте внимательны;
* Пользователи Blynk сервера ограничены 100 сообщениями в день;

## Кодировка в электронной почте

Библиотека обрабатывает все строки в кодировке UTF-8. Если у вас возникли проблемы, попробуйте напечатать ваше сообщение в терминал COM порта и посмотрите на результат \(терминал должен быть настроен на кодировку UTF-8\). Если не работает, возможно, вам следует также прочитать о поддержке кодировок вашего компилятора. Если работает, но ваше сообщение обрезано - вам нужно увеличить ограничение длины сообщения \(т.к. все символы кодировки UTF-8 потребляют как минимум вдвое больше байт информации если символы не Латинские\).

## Увеличение лимита длины сообщения

Вы можете увеличить максимальную длину сообщения, поместив в верхнюю часть своего кода строку \(до опредления Blynk\):

```cpp
#define BLYNK_MAX_SENDBYTES 256 // По умолчанию 128 байт
```

**Пример кода:** [Электронная почта](https://github.com/blynkkk/blynk-library/blob/master/examples/Widgets/Email/Email.ino)

